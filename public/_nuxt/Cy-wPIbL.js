import{a as y,r,o as w,t as c,v as d,C as x,x as e,E as u,G as g,m as k,M as C}from"./DVE9pVop.js";import{_ as b}from"./BbL6nTEg.js";import{C as S}from"./iCYYr22m.js";const j={key:0,id:"registration",class:"registration-section"},N={class:"registration-container"},L={class:"form-container"},O={class:"registration-form"},T={class:"input-group"},B={class:"input-group"},J={__name:"login",setup(m){const{$cookies:o}=y(),l=r(null),p=r(""),s=r(""),i=r("");w(async()=>{try{o.get("lang")||o.set("lang","id");const a=await fetch("/languages.json");l.value=await a.json(),p.value=o.get("lang")}catch(a){throw a}});const f=async()=>{if(s.value==""||i.value=="")alert("Invalid!");else try{var a={username:s.value,password:i.value};const v=k().public.token,_=await(await fetch("/api/utils/sk",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:v})})).json(),h=S.AES.encrypt(JSON.stringify(a),_).toString();var t=await(await fetch("/api/user/login/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:h})})).json();t.message=="ok"?(o.set("auth",t.auth,{path:"/admin",maxAge:900}),window.location.href="/admin/dashboard"):alert(t.message)}catch{alert("Invalid!")}};return(a,t)=>(d(),c("div",null,[l.value?(d(),c("section",j,[e("div",N,[t[5]||(t[5]=e("div",{class:"d-flex justify-content-center align-items-center logo-container"},[e("img",{src:b,alt:"Logo",class:"logo-img me-3 rounded-circle"})],-1)),e("div",L,[t[4]||(t[4]=e("h2",{class:""},"Login",-1)),e("div",O,[e("div",T,[t[2]||(t[2]=e("label",{for:"name"},"Username",-1)),u(e("input",{type:"text",id:"name","onUpdate:modelValue":t[0]||(t[0]=n=>s.value=n),placeholder:"Username",minlength:"1"},null,512),[[g,s.value]])]),e("div",B,[t[3]||(t[3]=e("label",{for:"password"},"Password",-1)),u(e("input",{type:"password",id:"password","onUpdate:modelValue":t[1]||(t[1]=n=>i.value=n),placeholder:"Password",maxlength:"12",minlength:"8"},null,512),[[g,i.value]])]),e("button",{onClick:f,class:"text-center hero-button"},"Login")])])])])):x("",!0)]))}},M={__name:"index",setup(m){return(o,l)=>(d(),C(J))}};export{M as default};
