import{a as b,r as i,o as k,t as v,v as f,C,x as e,y as l,E as m,G as g,m as j}from"./DVE9pVop.js";import{_ as w}from"./BbL6nTEg.js";import{C as x}from"./iCYYr22m.js";const S={key:0,id:"registration",class:"registration-section"},T={class:"registration-container"},D={class:"form-container"},N={class:"sub-title"},B={class:"registration-form"},J={class:"input-group"},L={for:"name"},O=["placeholder"],V={class:"input-group"},A={for:"email"},E=["placeholder"],K={class:"input-group"},M={for:"phone"},P=["placeholder"],q={__name:"registration",setup(U){const{$cookies:d}=b(),a=i(null),t=i(""),r=i(""),u=i(""),c=i("");k(async()=>{try{d.get("lang")||d.set("lang","id");const s=await fetch("/languages.json");a.value=await s.json(),t.value=d.get("lang")}catch(s){throw s}});const h=async()=>{const o=j().public.token,_=await(await fetch("/api/utils/sk",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:o})})).json();try{const p={name:r.value,email:u.value,phone:c.value,token:"mLc#:0_[$c<Ki_;F"},y=x.AES.encrypt(JSON.stringify(p),_).toString();(await(await fetch("/api/contact/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)})).json()).message=="ok"?(r.value="",u.value="",c.value="",t.value=="id"?alert("Data tersimpan!"):t.value=="en"?alert("Data stored!"):t.value=="jp"&&alert("データは保存されました!")):t.value=="id"?alert("Data gagal tersimpan, pastikan email dan nomor telepon belum pernah terdaftar!"):t.value=="en"?alert("Data failed to save, make sure the email and telephone number have never been registered!"):t.value=="jp"&&alert("データの保存に失敗しました。メールアドレスと電話番号が登録されていないことを確認してください。")}catch(p){throw p}};return(s,o)=>(f(),v("div",null,[a.value?(f(),v("section",S,[e("div",T,[o[3]||(o[3]=e("div",{class:"d-flex justify-content-center align-items-center logo-container"},[e("img",{loading:"lazy",src:w,alt:"General Trading, Konstruksi, Transporter Limbah B3 | Logo PT Marier Jaya Abadi Bandung",class:"logo-img me-3 rounded-circle"})],-1)),e("div",D,[e("h1",N,l(a.value[t.value].registration.title),1),e("div",B,[e("div",J,[e("label",L,l(a.value[t.value].registration.name),1),m(e("input",{type:"text",id:"name","onUpdate:modelValue":o[0]||(o[0]=n=>r.value=n),placeholder:a.value[t.value].registration.name,autocomplete:"off"},null,8,O),[[g,r.value]])]),e("div",V,[e("label",A,l(a.value[t.value].registration.email),1),m(e("input",{type:"email",id:"email","onUpdate:modelValue":o[1]||(o[1]=n=>u.value=n),placeholder:a.value[t.value].registration.email,autocomplete:"off"},null,8,E),[[g,u.value]])]),e("div",K,[e("label",M,l(a.value[t.value].registration.phone),1),m(e("input",{type:"text",id:"phone","onUpdate:modelValue":o[2]||(o[2]=n=>c.value=n),placeholder:a.value[t.value].registration.phone,maxlength:"12",autocomplete:"off"},null,8,P),[[g,c.value]])]),e("button",{onClick:h,class:"hero-button"},l(a.value[t.value].registration.register_button),1)])])])])):C("",!0)]))}};export{q as _};
