import{d as x,Y as O,Z as _,$ as H,h as c,a as j,r as S,a0 as K,a1 as T,u as I,I as L,a2 as h,a3 as b,a4 as N,a5 as C,a6 as B,a7 as F,Q as w,F as E,a8 as q,a9 as V,aa as Q}from"./Ckj89h4T.js";const Y=x({props:{vnode:{type:Object,required:!0},route:{type:Object,required:!0},vnodeRef:Object,renderKey:String,trackRootNodes:Boolean},setup(e){const o=e.renderKey,a=e.route,r={};for(const n in e.route)Object.defineProperty(r,n,{get:()=>o===e.renderKey?e.route[n]:a[n],enumerable:!0});return O(H,_(r)),()=>c(e.vnode,{ref:e.vnodeRef})}}),G=x({name:"NuxtPage",inheritAttrs:!1,props:{name:{type:String},transition:{type:[Boolean,Object],default:void 0},keepalive:{type:[Boolean,Object],default:void 0},route:{type:Object},pageKey:{type:[Function,String],default:null}},setup(e,{attrs:o,slots:a,expose:r}){const n=j(),i=S(),d=K(H,null);let s;r({pageRef:i});const l=K(T,null);let u;const g=n.deferHydration();if(n.isHydrating){const t=n.hooks.hookOnce("app:error",g);I().beforeEach(t)}e.pageKey&&L(()=>e.pageKey,(t,v)=>{t!==v&&n.callHook("page:loading:start")});let y=!1;return()=>c(q,{name:e.name,route:e.route,...o},{default:t=>{const v=$(d,t.route,t.Component),p=d&&d.matched.length===t.route.matched.length;if(!t.Component){if(u&&!p)return u;g();return}if(u&&l&&!l.isCurrent(t.route))return u;if(v&&d&&(!l||l!=null&&l.isCurrent(d)))return p?u:null;const f=h(t,e.pageKey);!n.isHydrating&&!z(d,t.route,t.Component)&&s===f&&(n.callHook("page:loading:end"),y=!0),s=f;const m=!!(e.transition??t.route.meta.pageTransition??b),A=m&&Z([e.transition,t.route.meta.pageTransition,b,{onAfterLeave:()=>{n.callHook("page:transition:finish",t.Component)}}].filter(Boolean)),k=e.keepalive??t.route.meta.keepalive??N;return u=C(m&&A,B(k,c(F,{suspensible:!0,onPending:()=>n.callHook("page:start",t.Component),onResolve:()=>{w(()=>n.callHook("page:finish",t.Component).then(()=>{if(!y)return n.callHook("page:loading:end");y=!1}).finally(g))}},{default:()=>{const R=c(Y,{key:f||void 0,vnode:a.default?c(E,void 0,a.default(t)):t.Component,route:t.route,renderKey:f||void 0,trackRootNodes:m,vnodeRef:i});return k&&(R.type.name=t.Component.type.name||t.Component.type.__name||"RouteProvider"),R}}))).default(),u}})}});function Z(e){const o=e.map(a=>({...a,onAfterLeave:a.onAfterLeave?V(a.onAfterLeave):void 0}));return Q(...o)}function $(e,o,a){if(!e)return!1;const r=o.matched.findIndex(n=>{var i;return((i=n.components)==null?void 0:i.default)===(a==null?void 0:a.type)});return!r||r===-1?!1:o.matched.slice(0,r).some((n,i)=>{var d,s,l;return((d=n.components)==null?void 0:d.default)!==((l=(s=e.matched[i])==null?void 0:s.components)==null?void 0:l.default)})||a&&h({route:o,Component:a})!==h({route:e,Component:a})}function z(e,o,a){return e?o.matched.findIndex(n=>{var i;return((i=n.components)==null?void 0:i.default)===(a==null?void 0:a.type)})<o.matched.length-1:!1}export{G as _};
